{"ast":null,"code":"var _jsxFileName = \"/Users/clementine/Desktop/react-systematic-master/02\\u77E5\\u4E4E\\u65E5\\u62A5/zhihu/src/views/Store.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { SwipeAction, Toast } from 'antd-mobile';\nimport styled from \"styled-components\";\nimport { connect } from 'react-redux';\nimport action from '../store/action';\nimport NavBarAgain from '../components/NavBarAgain';\nimport NewsItem from '../components/NewsItem';\nimport SkeletonAgain from '../components/SkeletonAgain';\nimport api from \"../api\";\n\n/* 样式 */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StoreBox = styled.div`\n    .box {\n        padding:0.4rem;\n    }\n`;\n_c = StoreBox;\nconst Store = function Store(props) {\n  _s();\n  let {\n    list: storeList,\n    queryStoreListAsync,\n    removeStoreListById\n  } = props;\n  useEffect(() => {\n    // 第一次加载完毕:如果redux中没有收藏列表,则异步派发获取\n    if (!storeList) queryStoreListAsync();\n  }, []);\n\n  // 移除收藏\n  const handleRemove = async id => {\n    try {\n      let {\n        code\n      } = await api.storeRemove(id);\n      if (+code !== 0) {\n        Toast.show({\n          icon: 'fail',\n          content: '移除失败'\n        });\n        return;\n      }\n      Toast.show({\n        icon: 'success',\n        content: '移除成功'\n      });\n      removeStoreListById(id);\n    } catch (_) {}\n  };\n  return /*#__PURE__*/_jsxDEV(StoreBox, {\n    children: [/*#__PURE__*/_jsxDEV(NavBarAgain, {\n      title: \"\\u6211\\u7684\\u6536\\u85CF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), storeList ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box\",\n      children: storeList.map(item => {\n        let {\n          id,\n          news\n        } = item;\n        return /*#__PURE__*/_jsxDEV(SwipeAction, {\n          rightActions: [{\n            key: 'delete',\n            text: '删除',\n            color: 'danger',\n            onClick: handleRemove.bind(null, id)\n          }],\n          children: /*#__PURE__*/_jsxDEV(NewsItem, {\n            info: news\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(SkeletonAgain, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 12\n  }, this);\n};\n_s(Store, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c2 = Store;\nexport default connect(state => state.store, action.store)(Store);\nvar _c, _c2;\n$RefreshReg$(_c, \"StoreBox\");\n$RefreshReg$(_c2, \"Store\");","map":{"version":3,"names":["React","useEffect","SwipeAction","Toast","styled","connect","action","NavBarAgain","NewsItem","SkeletonAgain","api","StoreBox","div","Store","props","list","storeList","queryStoreListAsync","removeStoreListById","handleRemove","id","code","storeRemove","show","icon","content","_","map","item","news","key","text","color","onClick","bind","state","store"],"sources":["/Users/clementine/Desktop/react-systematic-master/02知乎日报/zhihu/src/views/Store.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { SwipeAction, Toast } from 'antd-mobile';\nimport styled from \"styled-components\";\nimport { connect } from 'react-redux';\nimport action from '../store/action';\nimport NavBarAgain from '../components/NavBarAgain';\nimport NewsItem from '../components/NewsItem';\nimport SkeletonAgain from '../components/SkeletonAgain';\nimport api from \"../api\";\n\n/* 样式 */\nconst StoreBox = styled.div`\n    .box {\n        padding:30px;\n    }\n`;\n\nconst Store = function Store(props) {\n    let { list: storeList, queryStoreListAsync, removeStoreListById } = props;\n    useEffect(() => {\n        // 第一次加载完毕:如果redux中没有收藏列表,则异步派发获取\n        if (!storeList) queryStoreListAsync();\n    }, []);\n\n    // 移除收藏\n    const handleRemove = async (id) => {\n        try {\n            let { code } = await api.storeRemove(id);\n            if (+code !== 0) {\n                Toast.show({\n                    icon: 'fail',\n                    content: '移除失败'\n                });\n                return;\n            }\n            Toast.show({\n                icon: 'success',\n                content: '移除成功'\n            });\n            removeStoreListById(id);\n        } catch (_) { }\n    };\n\n    return <StoreBox>\n        <NavBarAgain title=\"我的收藏\" />\n        {storeList ?\n            <div className=\"box\">\n                {storeList.map(item => {\n                    let { id, news } = item;\n                    return <SwipeAction key={id} rightActions={[{\n                        key: 'delete',\n                        text: '删除',\n                        color: 'danger',\n                        onClick: handleRemove.bind(null, id)\n                    }]}>\n                        <NewsItem info={news} />\n                    </SwipeAction>;\n                })}\n            </div> :\n            <SkeletonAgain />\n        }\n    </StoreBox>;\n};\nexport default connect(\n    state => state.store,\n    action.store\n)(Store);"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,KAAK,QAAQ,aAAa;AAChD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,GAAG,MAAM,QAAQ;;AAExB;AAAA;AACA,MAAMC,QAAQ,GAAGP,MAAM,CAACQ,GAAI;AAC5B;AACA;AACA;AACA,CAAC;AAAC,KAJID,QAAQ;AAMd,MAAME,KAAK,GAAG,SAASA,KAAK,CAACC,KAAK,EAAE;EAAA;EAChC,IAAI;IAAEC,IAAI,EAAEC,SAAS;IAAEC,mBAAmB;IAAEC;EAAoB,CAAC,GAAGJ,KAAK;EACzEb,SAAS,CAAC,MAAM;IACZ;IACA,IAAI,CAACe,SAAS,EAAEC,mBAAmB,EAAE;EACzC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAME,YAAY,GAAG,MAAOC,EAAE,IAAK;IAC/B,IAAI;MACA,IAAI;QAAEC;MAAK,CAAC,GAAG,MAAMX,GAAG,CAACY,WAAW,CAACF,EAAE,CAAC;MACxC,IAAI,CAACC,IAAI,KAAK,CAAC,EAAE;QACblB,KAAK,CAACoB,IAAI,CAAC;UACPC,IAAI,EAAE,MAAM;UACZC,OAAO,EAAE;QACb,CAAC,CAAC;QACF;MACJ;MACAtB,KAAK,CAACoB,IAAI,CAAC;QACPC,IAAI,EAAE,SAAS;QACfC,OAAO,EAAE;MACb,CAAC,CAAC;MACFP,mBAAmB,CAACE,EAAE,CAAC;IAC3B,CAAC,CAAC,OAAOM,CAAC,EAAE,CAAE;EAClB,CAAC;EAED,oBAAO,QAAC,QAAQ;IAAA,wBACZ,QAAC,WAAW;MAAC,KAAK,EAAC;IAAM;MAAA;MAAA;MAAA;IAAA,QAAG,EAC3BV,SAAS,gBACN;MAAK,SAAS,EAAC,KAAK;MAAA,UACfA,SAAS,CAACW,GAAG,CAACC,IAAI,IAAI;QACnB,IAAI;UAAER,EAAE;UAAES;QAAK,CAAC,GAAGD,IAAI;QACvB,oBAAO,QAAC,WAAW;UAAU,YAAY,EAAE,CAAC;YACxCE,GAAG,EAAE,QAAQ;YACbC,IAAI,EAAE,IAAI;YACVC,KAAK,EAAE,QAAQ;YACfC,OAAO,EAAEd,YAAY,CAACe,IAAI,CAAC,IAAI,EAAEd,EAAE;UACvC,CAAC,CAAE;UAAA,uBACC,QAAC,QAAQ;YAAC,IAAI,EAAES;UAAK;YAAA;YAAA;YAAA;UAAA;QAAG,GANHT,EAAE;UAAA;UAAA;UAAA;QAAA,QAOb;MAClB,CAAC;IAAC;MAAA;MAAA;MAAA;IAAA,QACA,gBACN,QAAC,aAAa;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QAEd;AACf,CAAC;AAAC,GA7CIP,KAAK;AAAA,MAALA,KAAK;AA8CX,eAAeR,OAAO,CAClB8B,KAAK,IAAIA,KAAK,CAACC,KAAK,EACpB9B,MAAM,CAAC8B,KAAK,CACf,CAACvB,KAAK,CAAC;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}